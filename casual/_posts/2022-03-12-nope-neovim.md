---
layout: default
title: 我为什么不使用 Neovim
---

我认为 Neovim 是一个多余的产品，或者说，是一个不懂 Unix 哲学的产品

> Keep it simple，stupid

很多时候，我们常探讨为什么需要改变，我一直认同这句话，

> If it works, it works

Vim 大多数时候是 work 的，那么 Neovim 的创新有价值吗？

## 功能越多，越好吗？

正如官网所言，Neovim 正在努力把自己做成一个 IDE。我不能认同。因为这和 Vim 作为一个文字编辑器的初衷背道而驰。首先，如果你真的需要 IDE，为什么不去用 Jetbrain，Visual Studio Code 这些从根本上就是作为 IDE 来开发，并面向强劲处理器和现代操作系统，集合以图形界面为首的人机交互理念来主导设计的软件呢？

Vim 初衷是为终端设计的一个文字编辑器，如果把 Vim 做成 IDE，就好像要把一辆自行车改装成一台比肩保时捷的跑车，令人啼笑皆非。Vim 的核心人机交互设计，比如 insert/normal mode，实际是为了去掉鼠标支持的一种简化。而代价是当功能趋于复杂，单靠键盘是无法准确方便地进行操作。

另外一个例子是 Vimscript。很多人诟病它的学习成本，可编程性以及性能。但是Vimscript 的核心优势是没有其他语言编译器的支持，这是 KISS 原则的体现。因为很多 POSIX 系统上，并没有大家理所当然以为的 Linux 或者 MacOS 搭配的各种语言编译器。现在 Neovim 主导用 Lua 配置，让我百思不得其解，Neovim 的开发者就好像从来只是在配置齐全的桌面操作系统里工作一样。这实在是对 Vim 运行环境多样性的严重削弱。

## 微服务思想下的插件

Neovim 对于扩展开发提出了大胆的思路，就是

> API is first-class: discoverable, versioned, documented

这个论调在互联网，特别是微服务下，非常的普遍。但问题是，我们并不是在试图设计一个巨无霸。微服务的优势在于应付复杂多变的业务逻辑，在于减少单一组件失败对于全局影响，在于不同组件独立开发等。但是这些场景，能有多少适用于 Vim 的扩展插件？一个千行不到的插件，去适配这样一个设计理念，很难认同。

微软 LSP 的成功让很多桌面应用开发者开始引入 client - server 的概念，将大量附属功能从核心组件抛离，正如 Neovim 提到的，

> Remote plugins run as co-processes, safely and asynchronously

我觉得这也是一种东施效颦，到底效率能提高多少，客户体验能优化多少，并没有看到什么数据。从学术角度看似没有错误，但实际开发，这些插件资源利用率有多少？依赖性有多高？真的需要 async 吗？并不是说所有设计采用 sandbox mode，采用 async call 就是正确的。

不难想象，未来 Neovim 插件可以发展的愈发复杂，什么煮咖啡，甚至语音识别，我都相信不成问题。但这是 Vim 还是 Emacs？

## 我想对 Neovim 说不

我想对 Neovim 说不。我理解 Neovim 的愿景。这其实就像我工作中接触过的很多讨论，对于老旧的系统，我们总能从工程的角度挑出成百上千个缺憾。但是发现缺点的过程中，很容易忽略了优点。Neovim 就是这样的一个例子，它盲目地把 Vim 和其他优秀的现代 IDE 作比较，过于集中地去解决这些比较中发现的不足，却忽视了 Vim 本身的核心设计理念，让所有人在所有 POSIX 环境下都可以有效稳定地进行文字编辑。

> Vim is a highly configurable text editor

Vim 是一个可高定制化的文字编辑器，但它终究只是一个编辑器。你可以没有酷炫的自动补全，代码分析，色彩高亮，模糊搜寻，文件夹浏览，但是你一定要能把我输入的字母，写进本地文件里。
Neovim 更像是一个类似 Vim 编辑风格的 IDE，而并非对 Vim 加以完善或者演变至下一代。
